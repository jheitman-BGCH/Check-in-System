<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGCH Check-in</title>
    <link rel="stylesheet" href="style.css">
    <!-- FIX: Added a simple SVG favicon to prevent the 404 error in the console. -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%230281c6%22></rect></svg>">
</head>
<body>

    <div id="app-container">
        <!-- The placeholder SVG has been replaced with the official logo SVG -->
        <svg id="main-logo" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 813.68 481.26" role="img" aria-labelledby="logoTitle">
            <title id="logoTitle">Boys & Girls Club of Harlem Logo</title>
            <defs>
              <style>
                .cls-1 {
                  fill: #050505;
                }
          
                .cls-2 {
                  fill: #0281c6;
                }
              </style>
            </defs>
            <g id="Layer_1-2" data-name="Layer 1">
              <g>
                <path class="cls-2" d="M358.13.15c4.3,1.51,8.85,1.91,13.14,3.57,1.47.57,7.1,3.85,7.55,3.81.48-.04,6.86-3.52,8.79-4.16,4.24-1.4,8.64-1.69,12.8-3.22h15c3.06,1.53,6.61,1.64,9.91,2.7,2.04.66,6.82,3.47,8.15,3.48,1.54.02,7.68-2.98,10.05-3.65,3.53-1.01,7.39-1.03,10.76-2.53h14.32c3.37,1.44,7.12,1.51,10.6,2.7,2.4.82,5.96,3.47,8.16,3.47,1.7,0,7.98-3.09,10.58-3.78,3.63-.97,7.38-1.13,10.91-2.39,4.37.35,9.37-.48,13.64,0,6.87.77,16.59,4.62,21.83,9.19,27.98,30.1,56.8,59.67,84.5,89.85l-104.61,104.7c-18.49,15.76-40.5,15.52-58.34-1.02l-91.56-91.8c-13.18-6.47-24.8,4.57-33.17,13.52,23.33,25.66,48.57,49.5,72.94,74.15,26.05,26.36,52.02,52.97,78.05,79.41,26.07,18.42,39.04-.77,55.58-17.41,39.88-40.12,79.48-80.5,119.37-120.6l1.01-.34c.6-.04.95.37,1.39.67.93.61,11.23,10.9,11.6,11.63.27.52.45.84,0,1.35l-136.11,137.96c-10.82,14.25-35.82,15.06-51.66,10.09-2.13-.67-9.01-4.34-9.97-4.29-1.39.07-6.49,3.02-8.61,3.73-10.57,3.54-24.66,4.33-35.44,1.4-2.8-.76-9.56-4.53-11.2-4.43s-4.28,2.13-6.16,2.75c-11.92,3.89-26.5,4.87-38.56,1-2.15-.69-7.25-3.71-8.52-3.7-1.35,0-7.17,2.9-9.37,3.53-14.56,4.19-34.71,4-46.9-5.96l-84.59-88.55-.67-1.39.67-1.39,104.02-103.89c13.93-11.46,31.71-16.1,48.04-6.4,34.47,30.66,64.79,66.26,98.71,97.61,14.54,9.1,26.84-1.24,35.72-12.49l-1.02-1.74c-49.09-48.37-96.41-98.52-145.64-146.78-1.15-1.13-1.8-2.66-3.02-3.8-10.04-9.36-26.99-9.78-37.89-1.69l-137.38,139.39-1.29.59c-.91-.16-12.67-12.08-13.09-12.9-.27-.52-.45-.84,0-1.35L316.55,13.46c5.49-8.57,15.39-10.63,24.53-13.3h17.05ZM393.6,21.28l140.11,142.43,1.39.67c.4.04.68-.19,1.01-.34.81-.37,12.26-11.84,12.67-12.63s.33-1.13-.34-1.72l-123.15-124.31c-9.51-7.65-20.48-8.36-31.69-4.09ZM448.84,20.6l113.9,114.82,1.01.34c.85,0,11.78-10.57,12.32-11.61.41-.8.33-1.13-.34-1.72l-97.92-97.74c-8.84-6.91-18.47-6.4-28.96-4.1ZM502.71,20.6l86.61,88.27c.51.45.83.27,1.35,0,1.05-.54,11.62-11.45,11.62-12.3l-.67-1.39-70.34-70.77c-8.61-6.54-18.48-6.06-28.58-3.8ZM469.29,282.9l-141.18-142.76-1.01-.34c-.6-.04-.95.37-1.39.67-.97.65-11.89,11.54-12.28,12.31s-.33,1.13.34,1.72c41.26,41.87,82.81,83.51,124.51,124.99,9.09,7.1,20.55,7.23,31.01,3.41ZM413.37,283.58l-113.9-114.82-1.01-.34c-.8,0-11.18,10.01-11.62,10.94-.35.75-.53,1.28,0,2.02l97.56,98.11c8.43,6.36,19.07,7.76,28.96,4.1ZM360.18,283.58l-87.29-88.27c-.51-.45-.83-.27-1.35,0-1.05.54-11.62,11.45-11.62,12.3l.67,1.39,70.34,70.77c8.58,6.18,19.35,7.27,29.26,3.8Z"/>
                <path class="cls-1" d="M813.68,394.65c-1.3,3.1-6.21,10.22-9.89,10.22h-46.03c.36-1.69-.54-7.1.09-8.08.44-.69,5.46-.78,5.36-3.16-.95-5.49,1.52-31.14-.63-34.12-1.08-1.5-4.24-1.32-4.74-2.76-.61-1.77.23-5.05-.09-7.06h46.03c.44,0,3.52,2.12,4.12,2.69,4.48,4.27,4.57,16.17-.4,20.1l-7.47,3.09c6.71-.57,11.81,2.31,13.64,8.86v10.22ZM777.53,395.33h16.71c3.91,0,7.51-11.81.38-14-6.3-1.94-13.21,3.85-10.95-8.14.56-2.98,5.44-1.16,8.22-2.01,6.24-1.9,4.45-12.64.31-12.64h-13.64c-.07,0-1.02.95-1.02,1.02v35.77Z"/>
                <path class="cls-1" d="M293.01,404.87c-.34-.1-1.03-1.38-1.71-1.69-2.73-1.26-12.33,3.32-16.71,3.72-7.33.67-19.19-.07-25.78-3.52-12.01-6.28-10.73-24.85.21-31.61-3.81-5.44-7.25-10.61-2.72-16.99,6.65-9.36,33.47-9.46,39.01,1.23,4.47,8.63-3.75,15.24-10.35,19.21,1.61,1.02,11.94,10.78,12.94,9.88,1.23-2.01-.13-12.94,1.71-12.94h11.25v10.56c0,.29-.7,4.8-.83,5.3-.35,1.41-2.82,4.81-2.26,5.97.19.39,5.96,4.61,6.68,4.89,1.34.51,3.76.4,3.9.53.25.23-.17,4.44,0,5.45-3.94-.74-11.98,1-15.34,0ZM262.48,356.65c-10.22,2.08-.52,14.49,8.59,7.9,7.62-5.5-2.35-9.17-8.59-7.9ZM257.97,378.38c-.25.15-2.53,4.59-2.65,5.18-3.15,14.89,14.68,16.36,24.39,11.42l-17.79-14.91c-.97-.64-2.79-2.36-3.94-1.69Z"/>
                <path class="cls-1" d="M46.82,349.68c8.47,1.7,9.77,18.01,3.72,22.8l-7.47,3.09c12.34-.41,14.16,7.44,12.95,18.06-.39,3.44-5.92,11.24-9.21,11.24H.11c.32-1.97-.63-5.93.33-7.51,1.14-1.89,5.38-.48,5.85-4.38,1.17-9.82-.93-21.96-.05-32.05-.59-3.12-4.34-2.57-5.13-3.73-.93-1.37.01-5.67-.31-7.52h46.03ZM20.57,395.33h16.71c3.91,0,7.51-11.81.38-14-6.3-1.94-13.21,3.85-10.95-8.14.56-2.98,5.44-1.16,8.22-2.01,6.24-1.9,4.45-12.64.31-12.64h-13.64c-.07,0-1.02.95-1.02,1.02v35.77Z"/>
                <path class="cls-1" d="M460.09,349.68c12.22,2.03,11.31,24.71-1.7,24.87,1.6,1.44,3.63.92,5.73,1.77,7.1,2.88,3.3,11.62,4.8,17.03.75,2.73,5.48,2.37,5.81,2.69.38.38-.21,7.42.03,8.83h-19.44c-.07,0-1.02-.95-1.02-1.02v-18.4c0-.26-1.3-2.06-1.69-2.4-3.45-2.98-13.03-.05-14.38-1.99-.62-.89-.6-7.95.34-8.6,1.67-1.16,8.07.71,11.58-1.37,3.73-2.21,4.23-9.63-.12-11.35-2.07-.82-14.67-1.03-16.03.33-2.1,2.09-.17,28.7-.83,33.55.65,3.43,5.02,2.59,5.82,3.72.93,1.3-.05,6.33.3,8.22h-23.87c.35-1.96-.65-6.78.31-8.2.59-.88,3.77-1.22,4.72-1.95,1.34-1.04-.13-29.65.41-33.78-.66-3.47-5.05-2.75-5.41-3.11s.21-7.43-.03-8.83h44.67Z"/>
                <path class="cls-1" d="M718.89,349c.17,6.67,1.29,8.36-5.48,10.68.88,9.66-1.1,21.12.01,30.55.53,4.46,3.89,4.83,7.83,5.13,4.08.31,12.47.71,13.28-4.5,1.44-9.19-1-21.62.07-31.18-6.77-2.32-5.65-4.01-5.48-10.68h25.91c.17,6.67,1.29,8.36-5.48,10.68-1.14,10.85,1.96,26.26-.82,36.51-2.56,9.43-21,9.79-28.85,9.4-8.95-.45-19.88-1.87-20.79-12.61-.87-10.24.71-21.66,0-32.03-.62-3.28-5.55-3.11-6.03-3.86-.64-.98.26-6.4-.09-8.08h25.91Z"/>
                <path class="cls-1" d="M82.49,348.52c23.68-2.22,37.83,7.24,36.31,32.19-.93,15.23-8.24,22.3-23.06,24.65-16.45,2.61-34.44-1.19-37.59-19.98-3.29-19.6,3.22-34.88,24.34-36.86ZM82.45,357.34c-7,1.17-8.97,7.62-9.4,13.77-1.08,15.28,1.5,29.27,20.53,25.28,10.88-2.28,10.32-22.86,8.53-31.08-1.92-8.79-12.32-9.2-19.65-7.97Z"/>
                <path class="cls-1" d="M381.32,402.48c-.19.64-1.83,1.32-2.56,1.53-8.23,2.39-28.46,2.35-36.49-.67-15.06-5.67-17.52-23.96-13.65-37.84,5.69-20.4,30.05-18.86,46.8-15.88,1.76,1.07,1.5,16.09.49,16.79-.62.43-7.25.53-7.52.27-.11-.11-.11-2.2-.55-3.19-4.21-9.51-21.23-8.47-23.85,2.37-1.81,7.49-1.76,25.51,6.17,29.6,2.94,1.52,17.52,2.25,17.52-1.16v-11.24c-1.94-.32-8.29.73-9.25-.64-.71-1.01-1.13-8.9,1.41-8.9h20.46c.07,0,1.02.95,1.02,1.02v27.94Z"/>
                <path class="cls-1" d="M172.64,404.19v-17.71c1.86.32,6.15-.62,7.53.31.87.58,1.93,6.17,5.48,8.15s12.86,1.6,16.28-.66c3.55-2.35,4.22-7.61.66-10.13-7.55-3.15-24.81-3.67-28.96-11.26-3.54-6.47-2.02-16.14,3.77-20.83.95-.77,4.95-3.05,5.81-3.05h29.32c.07,0,1.02.95,1.02,1.02v14.99c0,1.3-5.93,1.32-7.07.93-1.28-.44-2.16-6.71-6.56-8.44-4.93-1.93-18.14-.5-14.66,7.15,2.99,6.57,28.21.68,31.54,15.5,1.91,8.5.1,19.15-8.7,23.01-5.72,2.51-24.89,2.27-31.74,1.74-1.31-.1-2.47-.4-3.72-.71Z"/>
                <path class="cls-1" d="M565.45,349v17.03c-8.33.77-6.01-.19-8.96-5.01-4.87-7.94-22.84-3.93-18.92,3.19,3.77,6.86,26.23,2.85,30.77,12.9,1.97,4.37,1.77,14.01-.36,18.36-1.83,3.74-8.18,9.4-12.42,9.4h-29.32c-.07,0-1.02-.95-1.02-1.02v-17.37c1.99.25,5.07-.55,6.83.33,1.88.94,2.57,8.2,9.26,9.15,4.53.64,14.55.46,15.82-5.19.53-2.36.27-5.27-2.09-6.48-7.43-3.48-25.19-3.81-29.28-11.63-3.53-6.74-1.56-16.33,4.58-20.92.82-.61,4.81-2.73,5.45-2.73h29.66Z"/>
                <path class="cls-1" d="M639.87,387.24c.71-.46,6.81-.51,7.32,1.03.39,1.19.24,13.89-.22,14.58-.65.99-6.63,1.82-8.22,2.01-21.53,2.54-41.81.27-43.32-25.51-.92-15.64,4.68-27.91,21.03-30.83,4.93-.88,23.58-1.83,27.13,1.11,1.45,1.2,1.34,12.99.66,15.08-.81,2.5-5.59,2.79-7.22,1.7-.73-.48-1.16-3.47-2.01-4.8-4.67-7.31-20.21-5.83-22.89,3.04-2.1,6.97-1.76,25.32,4.91,29.92,4.77,3.29,17.63,3.19,21.02-1.97.86-1.31,1.51-5.14,1.82-5.34Z"/>
                <path class="cls-1" d="M139.57,349c1.27.39,1.36,5.31,1.06,6.39-.35,1.26-4.68-.56-3.28,3.99.28.93,5.13,8.13,5.98,9.02,1.45,1.52,2.35,2.79,3.99.6,1.06-1.42,6.06-10.34,6.13-11.63.12-2.16-2.94-1.27-3.28-1.59-.24-.23-.31-5.85.61-6.49,1.05-.73,19.27-.53,20.18.37,1.14,1.12,1.49,5.48.67,6.84-.71,1.18-3.2,1.1-4.39,1.74-1.8.97-15.82,21.22-16.27,23.26-.35,1.55-.45,11.46-.03,12.69.69,2.03,4.3,1.4,5.04,2.45.93,1.31-.05,6.33.3,8.22h-24.21c-1.31,0-1.34-6.58-.94-7.75.59-1.71,4.42-1,4.72-2.24.35-1.49.2-13.08-.17-14.74s-14.69-21.65-16.27-22.58c-.85-.5-2.53-.29-3.06-1.03-.72-.98-.58-7.54.73-7.54h22.5Z"/>
                <path class="cls-1" d="M650.69,404.87c.36-1.68-.54-7.1.09-8.08.23-.35,4.7-1.36,5.62-2.07,1.35-1.03-.13-29.65.41-33.78-.05-2.93-4.96-2.46-5.81-3.73-.66-.99-.6-7.26.33-7.91s22.32-.67,23.27,0c.9.63.88,8.13.57,8.49-.22.25-6.07,1.08-6.07,2.45v33.39c0,.07.95,1.02,1.02,1.02h11.59c.74,0,4.93-3.93,5.4-4.82.97-1.83.83-6.51,1.71-7.15.75-.54,5.46-.53,6.23,0,1.23.86.51,8.89.61,10.97.08,1.68,1.95,11.21-.31,11.21h-44.67Z"/>
                <path class="cls-1" d="M476.79,404.87c.36-1.68-.54-7.1.09-8.08.23-.35,4.7-1.36,5.62-2.07,1.35-1.03-.13-29.65.41-33.78-.05-2.93-4.96-2.46-5.81-3.73-.66-.99-.6-7.26.33-7.91s22.32-.67,23.27,0c.9.63.88,8.13.57,8.49-.22.25-6.07,1.08-6.07,2.45v33.39c0,.07.95,1.02,1.02,1.02h11.59c.74,0,4.93-3.93,5.4-4.82.97-1.83.83-6.51,1.71-7.15.75-.54,5.46-.53,6.23,0,1.23.86.51,8.89.61,10.97.08,1.68,1.95,11.21-.31,11.21h-44.67Z"/>
                <path class="cls-1" d="M543.63,441.66l6.48,24.54,6.48-24.54h12.28v38.84h-7.5v-27.25l-7.15,26.58c-1.16,1.39-5.51.38-7.41.7l-7.95-27.97v27.94h-7.5v-38.84h12.28Z"/>
                <path class="cls-1" d="M411.33,349c-.35,1.89.63,6.92-.3,8.22-1.14,1.59-5.33-.58-5.88,5.03-.94,9.65.76,20.85.06,30.68.05,2.93,4.96,2.46,5.81,3.73s1.05,7.76-1.39,8.21c-2.02.37-21.3.34-22.21-.3-1.05-.73-1.03-7.34.04-8.22,1.26-1.04,5.19-.88,5.46-3.4-.97-9.76,1.28-21.93.03-31.38-.57-4.33-5.45-3.52-6.08-4.49s.26-6.4-.09-8.08h24.55Z"/>
                <path class="cls-1" d="M443.72,441.66c7.15,1.19,10.28,11.86,5.8,17.38l-6.82,4.76c2.64.43,12.35,16.01,11.59,16.7-2.34-.41-7.74.75-9.54-.34-2.16-1.3-6.61-11.75-10.21-14.33-2.18-1.56-4.18-1.88-6.85-1.68v16.35h-8.18v-38.84c7.31.86,17.23-1.16,24.21,0ZM427.69,458.01h10.57c4.11,0,7.12-5.65,3.73-8.5-.44-.37-4.05-1.72-4.42-1.72h-9.89v10.22Z"/>
                <path class="cls-1" d="M257.76,440.48c26.66-1.57,27.32,38.77,3.87,40.69-27.91,2.29-28.31-39.25-3.87-40.69ZM257.03,447.96c-7.76,1.31-8.93,10.57-7.84,17.05,2.03,12.05,18.9,11.81,20.3-.52,1.02-8.99-1.45-18.39-12.46-16.53Z"/>
                <path class="cls-1" d="M523.17,440.98v7.49h-20.46v7.49h18.07c1.56,0,.93,6.13,1.02,7.49h-19.09v9.54h21.14v7.49h-30.01v-38.5c0-.07.95-1.02,1.02-1.02h28.3Z"/>
                <path class="cls-1" d="M347.22,456.65h14.32v-14.65c0-1.52,8.87-1.52,8.87,0v38.5c-1.54-.17-8.87.65-8.87-1.02v-16.01h-14.32v17.03c-1.89-.3-7.63.71-8.57-.64-1.59-2.28.52-32.53-.2-37.76.66-1.98,8.77-1.37,8.77-.1v14.65Z"/>
                <path class="cls-1" d="M414.05,480.49c-2.1-.35-6.53.67-8.19-.33-1.75-1.06-2.32-6.68-3.33-8.12-.76-1.08-12.98,0-15.34-.45-.69.19-2.74,8.49-3.24,8.81-1.04.67-6.99-.28-8.77.09,2.39-4.54,13.14-37.28,14.97-38.52,1.02-.69,8.41-.62,9.24.36l14.66,38.15ZM399.73,464.83l-5.11-13.63-5.11,13.63h10.23Z"/>
                <path class="cls-1" d="M312.44,448.47h-19.09v8.18h16.37v7.49h-16.37v16.35h-8.18v-38.5c0-.07.95-1.02,1.02-1.02h25.23c1.56,0,.93,6.13,1.02,7.49Z"/>
                <polygon class="cls-1" points="468.61 441.66 468.61 473 487.71 473 487.71 480.5 459.75 480.5 459.75 441.66 468.61 441.66"/>
              </g>
            </g>
          </svg>
        <!-- The H1 is removed as the logo contains the name -->

        <div id="staff-login-section">
            <h2>Staff Login</h2>
            <p>Please log in to activate the check-in kiosk.</p>
            <button id="authorize_button" style="visibility:hidden;">Login</button>
        </div>

        <!-- New: Mode Selection -->
        <div id="mode-selection-section" style="display:none;">
            <h2>Select Check-in Mode</h2>
            <div class="mode-buttons-container">
                <button id="event-checkin-mode-button" class="mode-button">Event Check-in</button>
                <button id="general-visit-mode-button" class="mode-button">General Visit</button>
            </div>
        </div>

        <!-- New: Event Selection -->
        <div id="event-selection-section" style="display:none;">
            <h2>Select an Event</h2>
            <div id="event-list-container">
                <!-- Event buttons will be dynamically inserted here -->
            </div>
            <button id="back-to-mode-selection-button" class="secondary-button">Back</button>
        </div>

        <div id="visitor-section" style="display:none;">

            <!-- Wrapper for search elements to easily hide/show them -->
            <div id="search-container">
                <h2 id="kiosk-title">Visitor Check-in</h2>
                <!-- PATCH: Updated placeholder to include Name -->
                <input type="text" id="search-box" placeholder="Enter Name, Email, or Phone...">
                <button id="search-button">Search</button>
            </div>

            <div id="results"></div>
            
            <!-- Button to manually show the registration form -->
            <button id="show-registration-button">New Visitor? Register Here</button>

            <!-- Registration form is now wrapped in a div and hidden by default -->
            <div id="registration-form" style="display:none;">
                <h3>New Visitor Registration</h3>
                <div class="name-inputs">
                    <input type="text" id="firstname-input" placeholder="First Name">
                    <input type="text" id="lastname-input" placeholder="Last Name">
                </div>
                <input type="email" id="email-input" placeholder="Email Address">
                <input type="tel" id="phone-input" placeholder="Phone Number">
                <!-- Added mailing list subscription checkbox -->
                <div class="subscribe-container">
                     <input type="checkbox" id="subscribe-checkbox" name="subscribe">
                     <label for="subscribe-checkbox">Subscribe to our mailing list?</label>
                </div>
                <button id="register-button">Register & Check-in</button>
                <!-- Added button to allow users to go back -->
                <button id="back-to-search-button" class="secondary-button">Back to Search</button>
            </div>

            <!-- New: Update Guest Info Form -->
            <div id="update-guest-info-section" style="display:none;">
                <h3>Please Complete Your Information</h3>
                <p>We need a bit more info before we can check you in.</p>
                <div class="name-inputs">
                    <input type="text" id="update-firstname-input" placeholder="First Name" readonly>
                    <input type="text" id="update-lastname-input" placeholder="Last Name" readonly>
                </div>
                <input type="email" id="update-email-input" placeholder="Email Address (Required)">
                <input type="tel" id="update-phone-input" placeholder="Phone Number (Required)">
                <button id="update-and-checkin-button">Update & Check-in</button>
                <button id="back-to-event-search-button" class="secondary-button">Back to Search</button>
            </div>
        </div>
    </div>

    <!-- Inactivity Modal -->
    <div id="inactivity-modal" style="display:none;">
        <div class="modal-content">
            <p id="modal-message">Are you still there?</p>
            <p id="modal-countdown-p" style="display: block;">Returning to the main screen in <span id="countdown-timer">10</span> seconds...</p>
            <button id="stay-button">I'm still here</button>
        </div>
    </div>

    <!-- 
      FIX: This inline script has been updated to robustly handle the race condition
      between the Google API scripts loading and our main `script.js` module loading.
    -->
    <script>
        let scriptsLoaded = 0;
        function onGoogleScriptsLoad() {
            scriptsLoaded++;
            if (scriptsLoaded === 2) {
                // Both Google scripts have loaded. Now, we'll poll every 100ms
                // until our main application's initializeApp function is available on the window.
                const interval = setInterval(() => {
                    if (window.initializeApp) {
                        clearInterval(interval); // Stop polling
                        window.initializeApp();  // Initialize the app
                    }
                }, 100);
            }
        }
    </script>
    <script async defer src="https://apis.google.com/js/api.js" onload="onGoogleScriptsLoad()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="onGoogleScriptsLoad()"></script>
    
    <!-- The main script is loaded as a module and will expose the initializeApp function -->
    <script type="module" src="JS/script.js"></script>

</body>
</html>
